function AssessmentService(){function a(a,b,c){h.required=a,i.required=b,c=c}function b(){var a=h.required+i.required;return 0===a?1:Math.min((h.viewed.required+i.answered.required)/a,1)}function c(){return 0===j?!0:b()>=j}function d(a,b){h.viewed.total++,h.viewed.log.push(a),b&&h.viewed.required++}function e(a,b){i.answered.total++,i.answered.log.push(a),b&&i.answered.required++}function f(){return h}function g(){return i}var h={required:0,viewed:{required:0,total:0,log:[]}},i={required:0,answered:{required:0,total:0,log:[]}},j=.8,k={getScore:b,isPassing:c,setRequirements:a,pageViewed:d,questionCorrectlyAnswered:e,getPageStats:f,getQuestionStats:g};return k}!function(){"use strict";angular.module("newplayer.service",[])}(),function(){"use strict";function a(a,b){a.debug("\nApiService: Init\n");var c=function(){this.getData=function(c){a.debug("APIService::getData: URL:",c);var d=b.get(c,{cache:!0}).then(function(b){return a.debug("APIService::Received data from server ",b),b.data});return d}};return new c}angular.module("newplayer.service").factory("APIService",a),a.$inject=["$log","$http"]}(),function(){"use strict";function a(a,b){a.debug("configService::Init");var c=function(){function b(b){a.debug("ConfigService::setManifestURL",b),g.manifestURL=b}function c(a){g.overrideURL=a}function d(d){if(a.debug("ConfigService::initialize:config:",d,g.getManifestId()),!d.manifestId)throw new Error("manifestId cannot be empty");if(g.setManifestId(d.manifestId),!d.manifestURL)throw new Error("manifestURL cannot be empty");b(d.manifestURL),d.overrideURL&&c(d.overrideURL),d.overrideManifest&&f(d.overrideManifest)}function e(a){g.configData=a}function f(b){a.debug("ConfigService::setOverrideData:",b),g.overrideData=b}var g=this;this.setManifestId=function(b){a.debug("ConfigService::setManifestId",b),g.manifestId=b},this.getManifestId=function(){return g.manifestId},this.setManifestURL=b,this.getManifestURL=function(){return g.manifestURL},this.getOverrideURL=function(){return g.overrideURL},this.getConfig=function(){return g.configData},this.getConfigData=function(b){a.debug("ConfigService::getConfigData:",b);var c=g.getData(b);return c.then(function(b){a.debug("ConfigService::config data from server ",b),e(b[0]),d(b[0])}),c},this.setConfigData=function(b){a.debug("ConfigService::config data from server ",b),e(b),d(b)},this.getOverride=function(){return g.overrideData},this.getOverrideData=function(b){a.debug("ConfigService::getOverrideData:",b);var c=g.getData(b);return c.then(function(b){angular.extend(g.getOverride()||{},b[0]),a.debug("ConfigService::getOverrideData: merged:",g.getOverride())}),c}},d=new c;return angular.extend(d,b),a.debug("ConfigService::",d),d}angular.module("newplayer.service").factory("ConfigService",a),a.$inject=["$log","APIService","ManifestService"]}(),function(){"use strict";function a(a,b){a.debug("\nManifestService::Init\n");var c=function(){function c(){return m}function d(a){m=a}function e(){return n}function f(a){n=a}function g(){return o}function h(a){o=a}function i(){var a=g(),b=null;if(a)if(b=p.getComponent(a),b.components&&b.components.length>0)a.push(0),b=p.getComponent(a);else{var c=a.pop();if(a.push(++c),b=p.getComponent(a),!b)for(var d=!0;!b&&d;)a.length>1?(a.pop(),c=a.pop(),a.push(++c),b=p.getComponent(a)):(d=!1,a=null)}else a=[0],b=p.getComponent(a);return h(a),a?b:null}function j(a){if(angular.isArray(a))return a.slice(0);if("string"==typeof a){a=a.replace(/[\[\]]/g,"");for(var b=a.split(","),c=0;c<b.length;c++)b[c]=+b[c]||0;return b}return[0]}function k(a){return angular.forEach(arguments,function(b){b!==a&&angular.forEach(b,function(b,c){a[c]&&a[c].constructor&&a[c].constructor===Object?k(a[c],b):a[c]=b})}),a}function l(b){var c,d,f;if(b){if(!q&&(c=(b.data||{}).builderId,f=e(),f&&(d=f[c]),c&&d)){if(angular.isString(d)&&(d=d.replace(/\n/g," ")),a.debug("ManifestService::initializeComponent: override builderId:",c,d),"string"==typeof d)switch(d){case"delete":{var i=g(),j=i.pop(),l=p.getComponent(i);l.components.splice(j,1)}j>0&&(i.push(j-1),h(i));break;default:try{d=angular.fromJson(d)}catch(m){a.debug("ManifestService::initializeComponent: override: did not know what to do with builderId:",c,d,m)}}"object"==typeof d&&(a.debug("ManifestService::initializeComponent: override: extend:",b.data,d),k(b.data,d))}b.idx=g().slice(0),a.debug("ManifestService::initializeComponent: initialized:",b.idx,b)}}var m,n,o,p=this,q=!1;this.getComponent=function(b){var d;if(b){if(b=j(b),h(b),a.debug("ManifestService::getComponent: find component:",b),d=c()[b[0]],!d)return null;for(var e in b)if(e>0){var f=d.components;if(!f)return null;if(d=f[b[e]],!d)return null}a.debug("ManifestService::getComponent: found:",b,d)}else a.debug("ManifestService::getComponent: getNextComponent"),d=i(),l(d);return d},this.getFirst=function(b,c){c=c?j(c):[0],a.debug("ManifestService::getFirst",b,c);for(var d=p.getComponent(c);d&&d.type!==b;)if(d=i(),g()&&(g().length<c.length||g()[c.length-1]!==c[c.length-1]))return null;return d},this.getAll=function(b,c){a.debug("ManifestService::getAll:initialContext",c),c=c?j(c):[0];var d=[];a.debug("ManifestService::getAll",b,c);for(var e=p.getComponent(c);e;)if(a.debug("ManifestService::getAll:match?",e.type,b),e.type===b&&(d.push(e),a.debug("ManifestService::getAll:match!",d)),e=i(),a.debug("ManifestService::getAll:in context?",c,g()),g()&&(g().length<c.length||g()[c.length-1]!==c[c.length-1]))return d;return d},this.getLang=function(){return this.lang},this.setLang=function(a){this.lang=a},this.getPageId=function(){return this.pageId},this.setPageId=function(c){a.debug("ManifestService, setPageId",c),h(null),this.pageId=c,b.$broadcast("npPageIdChanged",c)},this.initialize=function(b,e){a.debug("ManifestService::initialize:",b,e),b&&d(b),e&&f(e[0]),q=!1,h(null);var g=p.getComponent();for(a.debug("ManifestService::initialize:initialParse",g);g;)g=p.getComponent();q=!0,a.debug("ManifestService::initialize:manifest data:",c())}};return new c}angular.module("newplayer.service").factory("ManifestService",a),a.$inject=["$log","$rootScope"]}(),function(){"use strict";function a(a,b,c,d){a.debug("\nComponentService::Init\n");var e=function(){var b=this,e="scripts/component/",f="scripts/plugin/",g="scripts/component/blank.html",h=[],i=[],j=function(a){m([]),p([]);var b=a.type||"empty",c=a.data;if(b&&c){var d=c.req;d&&n(b,d);var e=c.plugin;e&&q(e)}n(b,b+".js")},k=function(a,b){return b&&"string"==typeof b&&-1===b.indexOf(e)&&("/"===b.substr(0,1)||(b=e+a+"/"+b)),b},l=function(){return h},m=function(a){h=a},n=function(b,c){if(a.debug("ComponentService::addCmpDependencies:",b,c),"string"==typeof c)h.push(k(b,c));else for(var d in c){var e=c[d];h.push(k(b,e))}},o=function(){return i},p=function(a){i=a},q=function(b){if(a.debug("ComponentService::addCmpPlugins:",b),"string"==typeof b)i.push(f+b+".js");else for(var c in b){{b[c]}i.push(f+b+".js")}},r=function(b){var c=g;if(b){var d=b.type;if(angular.isString(d)){var e=d+".html",f=b.data;angular.isObject(f)&&angular.isString(f.template)&&(e=f.template),a.debug("ComponentService::load: parseTemplate",b,e),c=k(d,e)}}return c},s=function(){return g},t=function(c){var e=c.type||"empty",f=d.load({name:e,serie:l().length>1?!0:!1,files:l()}).then(function(){b.onLoad(c)})["catch"](function(d){a.debug("ComponentService::load err:",d),b.onLoad(c)});return f},u=function(){var b=d.load({name:"newplayer",files:o()}).then(function(){})["catch"](function(b){a.debug("ComponentService::load plugin err:",b)});return b};this.getTemplate=function(b){var d=r(b);if(a.debug("ComponentService::getTemlpate: cmp,templateURL:",b,d),d){var e=c.get(d,{cache:!0}).then(function(a){return a},function(){a.debug("ComponentService::getTemplate: load failed!"),d=s(),c.get(d,{cache:!0}).then(function(a){return a})});return e}},this.load=function(b){a.debug("\nComponentService::load:",b.type),j(b),a.debug("ComponentService::loading:",b.type,l());var c,d;return o().length>0?(a.debug("ComponentService::loading:plugins",o()),d=u(),d.then(function(){c=t(b)}),d):c=t(b)},this.onLoad=function(b){a.debug("ComponentService::loaded",b,"\n")}};return new e}angular.module("newplayer.service").factory("ComponentService",a),a.$inject=["$log","ManifestService","$http","$ocLazyLoad"]}(),function(){"use strict";angular.module("npVideo",[])}(),AssessmentService.$inject=["$log"],function(){"use strict";angular.module("newplayer",["ui.bootstrap","oc.lazyLoad","ngSanitize","newplayer.service"]).factory("AssessmentService",AssessmentService).config(["$logProvider",function(a){a.debugEnabled(!1)}])}(),function(){"use strict";function a(a){a.debug("AppController::Init")}angular.module("newplayer").controller("AppController",a),a.$inject=["$log","AssessmentService"]}(),function(){"use strict";function a(a){a.debug("NpLayer::Init\n");var c={restrict:"E",scope:{manifestId:"@npId",manifestURL:"@npUrl",overrideURL:"@npOverrideUrl",overrideData:"@npOverrideData",language:"@npLang"},controller:b,controllerAs:"vm",bindToController:!0};return c}function b(a,b,c,d,e,f,g,h,i,j){function k(){var b=i.getManifestURL();g.getData(b).then(function(b){n.manifestData=b;var g=i.getOverrideURL();n.language&&j.setLang(lang),g?(e.info("NpLayer: getting override data from:",g),i.getOverrideData(g).then(function(b){n.overrideData=b,l(n,a,c,d,f)})):(e.info("NpLayer: init manifest",n.manifestData),l(n,a,c,d,f))})}function l(a,b,c,d,e){c.empty(),j.initialize(a.manifestData,a.overrideData),m(b,c,d,e)}function m(a,b,c,d){var f=j.getComponent(c.idx),g=f.idx||[0];e.debug("NpLayer::parseComponent",f,g,c),f&&h.load(f).then(function(){if(e.debug("NpLayer::parseComponent then",f,g),a.subCmp=!1,a.component=f,a.components=null,a.cmpIdx=g.toString(),b.attr("data-cmpType",f.type),b.addClass("np-cmp-sub"),f.data){var c=f.data.id;c||(c=f.type+":"+g.toString()),/^[^a-zA-Z]/.test(c)&&(c="np"+c),c=c.replace(/[^\w\-.:]/g,"_"),f.data.id||(f.data.id=c),b.attr("id","np_"+c);var i=f.data["class"];angular.isString(i)&&(i=i.replace(/[^\w\-.:]/g,"_"),b.addClass("np_"+i));var j=f.data.plugin;angular.isString(j)&&(j=j.replace(/[^\w\-.:]/g,"_"))}f.components&&f.components.length>0&&(e.debug("NpLayer::parseComponent - HAS SUBS:",f),a.subCmp=!0,a.components=f.components),h.getTemplate(f).then(function(g){e.debug("NpLayer::parseComponent: template",g);var h=document.createElement("div");h.innerHTML=g.data;var k,l,m;k=angular.element(h.querySelectorAll(".np-cmp-wrapper")),l=angular.element(h.querySelectorAll(".np-cmp-main")),m=angular.element(h.querySelectorAll(".np-cmp-sub")),k.length&&(k.attr("id",c),k.addClass(j),angular.forEach(f.data,function(a,b){angular.isString(b)&&0===b.indexOf("data-")&&k.attr(b,a)})),l.length&&(k.length||(l.attr("id",c),l.addClass(j),angular.forEach(f.data,function(a,b){angular.isString(b)&&0===b.indexOf("data-")&&l.attr(b,a)})),l.addClass(i));var n=d(h.innerHTML);n(a,function(a){b.append(a)})})})}var n=this;n.manifestData=null,n.overrideData=null,i.setConfigData(n),k(),b.$on("npReplaceManifest",function(a,b){e.info("NpLayer:changeManifestTo | ",b),i.setManifestURL(b),k()})}angular.module("newplayer").directive("npLayer",a),a.$inject=["$log"],b.$inject=["$scope","$rootScope","$element","$attrs","$log","$compile","APIService","ComponentService","ConfigService","ManifestService"]}(),function(){"use strict";function a(a,b,c,d){a.debug("\nnpComponent::Init\n");var e=function(){function e(a,b,c){var e=d(a);e(b,function(a){c.append(a)})}function f(d,f,g){var h=b.getComponent(g.idx),i=h.idx||[0];a.debug("npComponent::parseComponent",h,i,g),h&&c.load(h).then(function(){if(a.debug("npComponent::parseComponent then",h,i),d.subCmp=!1,d.component=h,d.components=null,d.cmpIdx=i.toString(),f.attr("data-cmpType",h.type),f.addClass("np-cmp-sub"),h.data){var b=h.data.id;b||(b=h.type+":"+i.toString()),/^[^a-zA-Z]/.test(b)&&(b="np"+b),b=b.replace(/[^\w\-.:]/g,"_"),h.data.id||(h.data.id=b),f.attr("id","np_"+b);var g=h.data["class"];angular.isString(g)&&(g=g.replace(/[^\w\-.:]/g,"_"),f.addClass("np_"+g));var j=h.data.plugin;angular.isString(j)&&(j=j.replace(/[^\w\-.:]/g,"_"))}h.components&&h.components.length>0&&(a.debug("npComponent::parseComponent - HAS SUBS:",h),d.subCmp=!0,d.components=h.components),c.getTemplate(h).then(function(c){a.debug("npComponent::parseComponent: template",c);var i=document.createElement("div");i.innerHTML=c.data;var k,l,m;k=angular.element(i.querySelectorAll(".np-cmp-wrapper")),l=angular.element(i.querySelectorAll(".np-cmp-main")),m=angular.element(i.querySelectorAll(".np-cmp-sub")),k.length&&(k.attr("id",b),k.addClass(j),angular.forEach(h.data,function(a,b){angular.isString(b)&&0===b.indexOf("data-")&&k.attr(b,a)})),l.length&&(k.length||(l.attr("id",b),l.addClass(j),angular.forEach(h.data,function(a,b){angular.isString(b)&&0===b.indexOf("data-")&&l.attr(b,a)})),l.addClass(g)),e(i.innerHTML,d,f)})})}this.restrict="EA",this.scope=!0,this.controller=function(b,c,d){a.debug("npComponent::controller",c,d)},this.controller.$inject=["$scope","$element","$attrs"],this.controllerAs="vm",this.compile=function(){return function(b,c,d){a.debug("npComponent::compile!"),f(b,c,d)}}};return new e}angular.module("newplayer").directive("npComponent",a),a.$inject=["$log","ManifestService","ComponentService","$compile"]}();